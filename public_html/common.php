<?php# Nginx don't have PATH_INFOif (!isset($_SERVER['PATH_INFO'])) {	$_SERVER['PATH_INFO'] = substr($_SERVER['ORIG_SCRIPT_FILENAME'], strlen($_SERVER['SCRIPT_FILENAME']));}function request_info($path = null) {	global $request;	$info = [];	$info['abs_path'] = (($path) ? $path : config('media_dir') . "\\" . $request);	$info['hash'] = md5((($path) ? $path : $request));	$info['iphone'] = pathinfo($info['abs_path'])['dirname'] . "\\" . pathinfo($info['abs_path'])['filename'] . '.iphone.mp4';	$info['log'] = config('log_dir') . "\\" . $info['hash'] . '.txt';	return $info;}# Function Getter/Setter configuration$config = [];function config($key, $value=null) {	global $config;	if (is_null($value)) return $config[$key];	$config[$key] = $value;}# Load configrequire_once dirname(__file__) . '/config.php';# Requested file$request = substr($_SERVER['PATH_INFO'], 1);# == Security ==# Prevent go to parent directory$request = str_replace('..', '.', $request);# Whitelist extensionif ($request && !in_array(pathinfo($request)['extension'], config('extensions'))) die('Unsupported extension');